"0",""
"0","# Define observed odds ratio"
"0","observed_rr <- 1.02"
"0",""
"0","# Calculate bias-adjusted estimate for different values of bias parameters"
"0","results <- NULL"
"0","for (s01 in S01) {"
"0","  for (diff in differences) {"
"0","    bias_adj_rr <- calc_bias_adj_or(observed_rr, s01, S00 + diff, S00, s01 + diff)"
"0","    results_row <- tibble_row(bias_adj_rr=bias_adj_rr, s01=s01, diff=as.character(diff))"
"0","    results <- bind_rows(results, results_row)"
"0","  }"
"0","}"
"0",""
"0","# Tidy label for difference in selection probabilities"
"0","results <- results %>% "
"0","  mutate(diff=factor(diff, levels=c(""0"", ""-0.05"", ""-0.1""), labels=c(""0"", ""-5%"", ""-10%"")))"
"0",""
"0","# Plot figure of bias-adjusted estimates"
"0","ggplot(data = results, aes(x=s01, y=bias_adj_rr, colour=diff)) + "
"0","  geom_line() + "
"0","  theme_minimal() +"
"0","  ylim(1.0, 1.6) + "
"0","  scale_x_reverse() +"
"0","  xlab(""Selection probability of unexposed with cardiac malformations"") + "
"0","  ylab(""Bias-adjusted risk ratio"") +"
"0","  guides(colour=guide_legend(title=""Difference in selection\nprobability of exposed"")) +"
"0","  theme(legend.title=element_text(size=10))"
